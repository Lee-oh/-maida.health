<script src="../plugins/jquery/jquery.min.js"></script>
<script src="../plugins/chart.js/Chart.min.js"></script>
<script src="../dist/js/demo.js"></script>
<script>
$(function () {
  'use strict'

  var ticksStyle = {
    fontColor: '#495057',
    fontStyle: 'bold'
  }

  var mode      = 'index'
  var intersect = true

  var $visitorsChart = $('#visitors-chart')
  var visitorsChart  = new Chart($visitorsChart, {
    data   : {
      labels  : ['<%=@diet.start%>',
      <% @points.each do |point| %>
        '<%=point.schedule%>',
       <%end%>
       '<%=@diet.finish%>'],
      datasets: [{
        type                : 'line',
        data                : ['<%=@diet.weight%>',
        <% @points.each do |point| %>
         '<%=point.weight%>',
        <%end%>
         '<%=@diet.target_weight%>'],
        backgroundColor     : 'transparent',
        borderColor         : '#007bff',
        pointBorderColor    : '#007bff',
        pointBackgroundColor: '#007bff',
        fill                : false
        // pointHoverBackgroundColor: '#007bff',
        // pointHoverBorderColor    : '#007bff'
      }]
    },
    options: {
      maintainAspectRatio: false,
      tooltips           : {
        mode     : mode,
        intersect: intersect
      },
      hover              : {
        mode     : mode,
        intersect: intersect
      },
      legend             : {
        display: false
      },
      scales             : {
        yAxes: [{
          // display: false,
          gridLines: {
            display      : true,
            lineWidth    : '4px',
            color        : 'rgba(0, 0, 0, .2)',
            zeroLineColor: 'transparent'
          },
          ticks    : $.extend({
            beginAtZero : true,
            suggestedMax: 150
          }, ticksStyle)
        }],
        xAxes: [{
          display  : true,
          gridLines: {
            display: false
          },
          ticks    : ticksStyle
        }]
      }
    }
  })
})
</script>

  <div class="card">
  <div class="card-header">
  <h5 class="card-title m-0"><%=@diet.title%></h5>
  </div>
  <div class="card-body">
  <div class="card">
  <div class="card-header border-0">
    <div class="d-flex justify-content-between">
      <h3 class="card-title">Evolution of Diet</h3>
      <a href="javascript:void(0);">View Report</a>
    </div>
  </div>
  <div class="card-body">
    <div class="d-flex">
      <p class="d-flex flex-column">
        <span>Weight Over Time</span>
      </p>
      <p class="ml-auto d-flex flex-column text-right">
        <span class="text-success">
          <i class="fas fa-arrow-up"></i> 12.5%
        </span>
        <span class="text-muted">Since last week</span>
      </p>
    </div>
    <!-- /.d-flex -->

    <div class="position-relative mb-4">
      <canvas id="visitors-chart" height="200"></canvas>
    </div>

    <div class="d-flex flex-row justify-content-end">
      <span class="mr-2">
        <i class="fas fa-square text-primary"></i> This Week
      </span>
    </div>
  </div>
</div>


  <br>
  <a href="/point_new/<%=@diet.id%>" class="btn btn-primary">Add Point</a>
  </div>
  </div>

<div class="card">
  <div class="card-header">
    <h5 class="card-title m-0">Informations</h5>
  </div>
  <div class="card-body">
    <h6 class="card-title"><%=@diet.title%></h6>
    <p class="card-text"><%=@diet.description%></p>
    <p class="card-text"><%=@diet.schedule%></p>
    <p class="card-text"><%=@diet.start%></p>
    <p class="card-text"><%=@diet.finish%></p>
    <p class="card-text"><%=@diet.period%></p>
    <p class="card-text"><%=@diet.height%></p>
    <p class="card-text"><%=@diet.weight%></p>
    <p class="card-text"><%=@diet.target_weight%></p>
    <a href="/diet_edit/<%=@diet.id%>" class="btn btn-primary">Edit</a>
    <a href="/diet_delete/<%=@diet.id%>" class="btn btn-primary">Delete</a>
    <div class="card-body table-responsive p-0">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Weight</th>
        <th>Schedule</th>
        <th>Show</th>
      </tr>
    </thead>
    <tbody>
    <% @points.each do |point| %>
      <tr>
        <td><%=point.id%></td>
        <td><%=point.title%></td>
        <td><%=point.schedule%></td>
        <td><%=point.weight%></td>
        <td><a href="/point/<%=point.id%>"><i class="fas fa-eye"></i></a></td>
      <%end%>
    </tbody>
  </table>
</div>
</div>
</div>
</div>